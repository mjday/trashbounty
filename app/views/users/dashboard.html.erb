<!-- Users will have different Dashboard views -->

<!-- renders Collector Users Dashboard  -->
<% if @user.business == false %>
  <div class="container">
    <section id="tabs">
    <div class="container">
      <div class="row justify-content-center align-items-center">
        <div class="col-xs-12 col-md-12 col-12">

          <!-- Profile Card -->
          <div class="card promoting-card my-3">
            <!-- Card content -->
            <div class="card-body d-flex flex-row">
              <!-- Avatar -->
              <img src="https://mdbootstrap.com/img/Photos/Avatars/avatar-8.jpg" class="rounded-circle mr-3" height="50px" width="50px" alt="avatar">
              <!-- Content -->
              <div>

                <h4 class="card-title font-weight-bold mb-2"><%= @user.username %></h4>
                <p>User id: <%= @user.id %></p>

                <p class="card-text">Rank</p>
              </div>
            </div>
          </div> <!-- End Profile Card -->

          <!-- Dashboard Card -->
          <div class="card chart-card">
            <!-- Card content -->
            <div class="card-body pb-0">
              <h4 class="card-title font-weight-bold">Some header (if needed)?</h4>

              <!-- Camera -->
              <p class="card-text mb-4">

                <!-- <input type="file" accept="image/*" capture>
                <input type="file" accept="image/*" capture="user">
                <input type="file" accept="image/*" capture="environment"> -->

              </p>


              <div class="d-flex justify-content-between">
                  <p class="display-4 align-self-end"><%# sum += collection.total_kg %><%= @sum %></p>

                <p class="align-self-end pb-2">Collected (Kg)</p>
              </div>
            </div>
            <!-- End Card content -->

            <!-- Dashboard Nav -->
            <nav>
              <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-earned-tab" data-toggle="tab" href="#nav-earned" role="tab" aria-controls="nav-earned" aria-selected="true">Earned</a>
                <a class="nav-item nav-link" id="nav-collected-tab" data-toggle="tab" href="#nav-collected" role="tab" aria-controls="nav-collected" aria-selected="false">Collected</a>
                <a class="nav-item nav-link" id="nav-history-tab" data-toggle="tab" href="#nav-history" role="tab" aria-controls="nav-history" aria-selected="false">Collection History</a>
              </div>
            </nav>
            <!-- Earned Tab -->
            <div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">
              <div class="tab-pane fade show active" id="nav-earned" role="tabpanel" aria-labelledby="nav-earned-tab">
                <p>Total Kg Collected </p>

                <p> </p>
                <hr>
                <p>Amount Earned</p>
                <p>IDR: </p>
                <p>BTC: </p>
              </div>
              <!-- Collected Tab -->
              <div class="tab-pane fade" id="nav-collected" role="tabpanel" aria-labelledby="nav-collected-tab">

                 <p>should show a chart</p>
              </div>
              <!-- Collection History Tab -->
              <div class="tab-pane fade" id="nav-history" role="tabpanel" aria-labelledby="nav-history-tab">


                <table id="dtDynamicVerticalScrollExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th class="th-sm">#</th>
                      <th class="th-sm">Date</th>
                      <th class="th-sm">Total Kg</th>
                      <th class="th-sm">Amount ($)</th>
                      <th class="th-sm">Payment Type</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% counter = 0 %>
                    <% @user.collections.each do |collection| %>
                    <tr>
                      <td><%= counter + 1 %></td>
                      <td><%= collection.date %></td>
                      <td><%= collection.total_kg %></td>
                      <!-- total amount should be the total after the correctly calculated rates -->
                      <td><%= collection.total_amount %></td>
                      <td><%= collection.payment_type %></td>
                    </tr>
                    <% end %>

                  </tbody>
                </table>

              </div> <!-- End Collection History Tab -->
            </div> <!-- end Tabs content -->
            </div>
            <!-- End Card content -->
          </div> <!-- End Dashboard Card -->

        </div> <!-- end col-xs-12 -->
      </div> <!-- end row -->
    </div> <!-- end container -->
  </div> <!-- Collector Dashboard Container -->

<% else %>
  <!-- renders Business (Recycle Bank) Users Dashboard  -->
  <div class="container">
    <section id="tabs">
    <div class="container">
      <div class="row justify-content-center align-items-center">
        <div class="col-xs-12 ">
          <h6 class="section-title h1">Recycle Bank Dashboard</h6>
          <nav>
            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
              <a class="nav-item nav-link active" id="nav-bank-tab" data-toggle="tab" href="#nav-bank" role="tab" aria-controls="nav-bank" aria-selected="true">Recycle Banks</a>
              <a class="nav-item nav-link" id="nav-collection-tab" data-toggle="tab" href="#nav-collection" role="tab" aria-controls="nav-collection" aria-selected="false">Collections</a>
              <a class="nav-item nav-link" id="nav-review-tab" data-toggle="tab" href="#nav-review" role="tab" aria-controls="nav-review" aria-selected="false">Reviews</a>
            </div>
          </nav>
          <!-- Recycle Center Tab -->
          <div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-bank" role="tabpanel" aria-labelledby="nav-bank-tab">
                <!-- table here -->
                <table id="dtDynamicVerticalScrollExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th class="th-sm">#</th>
                      <th class="th-sm">My Recycle Center</th>
                    </tr>
                  </thead>
                  <tbody>
                  <% counter = 0 %>
                  <% @banks.each do |bank| %>
                  <tr>
                    <td><%= counter = counter + 1 %></td>
                    <td><%= link_to bank.name, bank_path(bank) %></td>
                  </tr>
                  <% end %>
                </table>

                  <%= link_to 'List a recycling center', new_bank_path, class: "btn btn-warning" %>
            </div>
            <!-- Transactions Tab -->
            <div class="tab-pane fade" id="nav-collection" role="tabpanel" aria-labelledby="nav-collection-tab">
               <p>View Verification history</p>
            </div>
            <!-- Reviews Tab -->
            <div class="tab-pane fade" id="nav-review" role="tabpanel" aria-labelledby="nav-review-tab">
              <p>see all my reviews here...?</p>
            </div>
          </div> <!-- end Tabs content -->
        </div> <!-- end col-xs-12 -->
      </div> <!-- end row -->
    </div> <!-- end container -->
  </div> <!-- Business (Recycle Bank) Dashboard Container -->

<% end %>





